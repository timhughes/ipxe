{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"iPXE Network Boot Menu","text":"<p>Welcome to the iPXE network boot menu site! This site hosts an automatically-generated iPXE boot menu powered by elfshoe.</p>"},{"location":"#what-is-this","title":"What is This?","text":"<p>This site provides:</p> <ul> <li>elfshoe.ipxe - A network boot menu that supports multiple Linux distributions</li> <li>Setup instructions - How to configure your TFTP/DHCP server to use this menu</li> <li>Automatic updates - The menu is regenerated daily with the latest distribution versions</li> </ul>"},{"location":"#available-distributions","title":"Available Distributions","text":"<p>The current menu includes:</p> <ul> <li>Boot from Local Disk (default) - Boots your installed operating system</li> <li>Fedora Server - Latest 3 versions (x86_64, ARM64)</li> <li>Debian - Bookworm (12) and Trixie (13) (x86_64, ARM64)</li> <li>Utilities - netboot.xyz, Memtest86+, Reboot, iPXE shell, and BIOS exit</li> </ul> <p>Default Behavior</p> <p>The menu defaults to \"Boot from Local Disk\" with a 30-second timeout. If you don't press any key, your system will boot normally from its hard drive.</p> <p>CentOS Stream</p> <p>CentOS Stream is not included because mirror.stream.centos.org redirects to HTTPS, which requires iPXE to be built with HTTPS support.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>To use this boot menu:</p> <ol> <li>Download the iPXE script: elfshoe.ipxe</li> <li>Set up your infrastructure - See the Setup Guide</li> <li>Boot your machines - Enable network boot in BIOS/UEFI</li> </ol>"},{"location":"#features","title":"Features","text":"<ul> <li>Architecture-aware - Automatically shows only compatible options for your CPU architecture</li> <li>Dynamic versions - Fedora versions are fetched automatically from official metadata</li> <li>Multi-architecture - Supports x86_64 and ARM64 systems</li> <li>Fast HTTP delivery - Menu served over HTTP for speed and reliability</li> </ul>"},{"location":"#about-elfshoe","title":"About elfshoe","text":"<p>elfshoe is a tool that generates iPXE boot menus from a YAML configuration file. It supports:</p> <ul> <li>Dynamic version fetching from distribution metadata</li> <li>Multi-architecture support with intelligent client filtering</li> <li>URL validation to ensure boot files exist</li> <li>Flexible menu customization</li> </ul>"},{"location":"#updates","title":"Updates","text":"<p>This menu is automatically regenerated:</p> <ul> <li>When the configuration is updated</li> <li>Daily at midnight UTC</li> <li>On manual trigger</li> </ul> <p>Need help? Check the Setup Guide or visit the elfshoe documentation.</p>"},{"location":"customization/","title":"Customizing the Boot Menu","text":"<p>The generated iPXE menu includes commented-out customization options that you can enable by editing the <code>elfshoe.ipxe</code> file.</p>"},{"location":"customization/#visual-customization-options","title":"Visual Customization Options","text":"<p>The generated iPXE menu automatically includes a background image and provides additional customization options:</p> <pre><code>#!ipxe\ndhcp\n\n# Visual customization\n# Background image\nimgfetch https://timhughes.github.io/ipxe/images/background.png || echo Failed to fetch background\nimgdraw background.png || echo Failed to draw background\n\n# Customize colors (optional - uncomment to enable):\n# cpair --foreground 0x00cc00 --background 0x000000 0  # Green on black\n# cpair --foreground 0xffffff --background 0x0066cc 1  # White on blue (selected)\n# cpair --foreground 0xcccccc --background 0x000000 2  # Gray on black (normal text)\n\n# Set console resolution (optional - uncomment to enable):\n# console --x 1024 --y 768\n</code></pre> <p>Background Image</p> <p>The menu includes a default background image hosted on GitHub Pages. This requires iPXE to be built with <code>IMAGE_PNG</code> support. If your iPXE build doesn't support images, the menu will still work - it just won't display the background.</p>"},{"location":"customization/#how-to-enable-customizations","title":"How to Enable Customizations","text":""},{"location":"customization/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/timhughes/ipxe.git\ncd ipxe\n</code></pre>"},{"location":"customization/#2-edit-elfshoeipxe","title":"2. Edit elfshoe.ipxe","text":"<p>Open <code>docs/elfshoe.ipxe</code> and uncomment the options you want:</p> <p>Example: Enable Custom Colors</p> <pre><code>#!ipxe\ndhcp\n\n# Visual customization\ncpair --foreground 0x00cc00 --background 0x000000 0  # Green on black\ncpair --foreground 0xffffff --background 0x0066cc 1  # White on blue (selected)\n\n:start\nmenu Network Boot Menu\n...\n</code></pre>"},{"location":"customization/#3-commit-and-push","title":"3. Commit and Push","text":"<pre><code>git add docs/elfshoe.ipxe\ngit commit -m \"chore: enable custom colors\"\ngit push\n</code></pre> <p>The GitHub Actions workflow will automatically rebuild and deploy your customized menu.</p>"},{"location":"customization/#customization-options-explained","title":"Customization Options Explained","text":""},{"location":"customization/#color-pairs-cpair","title":"Color Pairs (<code>cpair</code>)","text":"<p>iPXE uses color pairs to define text appearance:</p> <ul> <li>Pair 0: Normal menu items</li> <li>Pair 1: Selected/highlighted items  </li> <li>Pair 2: Additional text elements</li> </ul> <p>Color format: <code>0xRRGGBB</code> (hexadecimal RGB)</p> <p>Common Color Schemes</p> <p>Matrix Green: <pre><code>cpair --foreground 0x00ff00 --background 0x000000 0\ncpair --foreground 0x000000 --background 0x00ff00 1\n</code></pre></p> <p>Corporate Blue: <pre><code>cpair --foreground 0xffffff --background 0x003366 0\ncpair --foreground 0xffffff --background 0x0066cc 1\n</code></pre></p> <p>Dark Mode: <pre><code>cpair --foreground 0xcccccc --background 0x1a1a1a 0\ncpair --foreground 0xffffff --background 0x333333 1\n</code></pre></p>"},{"location":"customization/#console-resolution","title":"Console Resolution","text":"<p>Set a custom console resolution for your boot menu:</p> <pre><code>console --x 1024 --y 768\n</code></pre> <p>Common resolutions: - <code>800x600</code> - Standard - <code>1024x768</code> - XGA - <code>1280x1024</code> - SXGA - <code>1920x1080</code> - Full HD</p>"},{"location":"customization/#background-images","title":"Background Images","text":"<p>Display PNG images as backgrounds:</p> <pre><code>imgfetch http://yourserver.com/background.png\nimgdraw background.png\n</code></pre> <p>Requirements</p> <ul> <li>Image must be PNG format</li> <li>iPXE must be compiled with <code>IMAGE_PNG</code> support</li> <li>Keep images small (recommended &lt; 100KB)</li> <li>Use appropriate resolution for your target display</li> </ul>"},{"location":"customization/#advanced-custom-per-distribution-logos","title":"Advanced: Custom Per-Distribution Logos","text":"<p>For per-distribution customization (like showing Fedora logo in Fedora submenu), we're tracking this feature request in elfshoe issue #2.</p> <p>Current workaround: Manually edit the generated file and add <code>imgfetch</code>/<code>imgdraw</code> commands before each submenu label (e.g., before <code>:fedora_menu</code>).</p>"},{"location":"customization/#hosting-custom-assets","title":"Hosting Custom Assets","text":"<p>If you want to host background images or logos:</p>"},{"location":"customization/#option-1-add-to-github-pages","title":"Option 1: Add to GitHub Pages","text":"<pre><code># Add images to docs directory\nmkdir -p docs/images\ncp background.png docs/images/\n\n# Reference in elfshoe.ipxe\nimgfetch https://timhughes.github.io/ipxe/images/background.png\n</code></pre>"},{"location":"customization/#option-2-use-external-hosting","title":"Option 2: Use External Hosting","text":"<p>Host images on your own server and reference them:</p> <pre><code>imgfetch http://yourserver.com/ipxe/background.png\nimgdraw background.png\n</code></pre>"},{"location":"customization/#testing-your-customizations","title":"Testing Your Customizations","text":"<p>Before deploying, test in a VM:</p> <ol> <li>Set up PXE boot in a virtual machine</li> <li>Point it to your test menu</li> <li>Verify colors and images display correctly</li> <li>Test on both BIOS and UEFI boot modes</li> </ol>"},{"location":"customization/#troubleshooting","title":"Troubleshooting","text":""},{"location":"customization/#colors-not-appearing","title":"Colors not appearing","text":"<ul> <li>Ensure your terminal/console supports colors</li> <li>Some hardware may have limited color support</li> </ul>"},{"location":"customization/#background-image-not-loading","title":"Background image not loading","text":"<ul> <li>Check that iPXE was built with <code>IMAGE_PNG</code> support</li> <li>Verify the image URL is accessible from the boot network</li> <li>Try a smaller image file</li> <li>Check image format is PNG (not JPG)</li> </ul>"},{"location":"customization/#console-resolution-not-changing","title":"Console resolution not changing","text":"<ul> <li>Some systems may ignore resolution commands</li> <li>Try different resolution values</li> <li>Check if your hardware supports the requested resolution</li> </ul>"},{"location":"customization/#future-improvements","title":"Future Improvements","text":"<p>We've requested native support for customization in elfshoe. Track progress:</p> <ul> <li>Issue #2: Support for custom iPXE preamble commands and distribution logos</li> </ul> <p>Once implemented, you'll be able to configure customizations directly in <code>config.yaml</code> instead of editing the generated file.</p>"},{"location":"setup/","title":"Server Setup Guide","text":"<p>This guide walks you through setting up the complete network boot infrastructure to use this iPXE menu.</p>"},{"location":"setup/#overview","title":"Overview","text":"<p>Network booting with iPXE requires three components:</p> <ol> <li>DHCP Server - Directs clients to the TFTP server and boot files</li> <li>TFTP Server - Serves iPXE boot loaders (ipxe.pxe, ipxe.efi)</li> <li>HTTP Server - This site! Or your own mirror of elfshoe.ipxe</li> </ol> <pre><code>graph LR\n    A[PXE Client] --&gt;|DHCP Request| B[DHCP Server]\n    B --&gt;|Boot from TFTP| A\n    A --&gt;|Download ipxe.efi| C[TFTP Server]\n    C --&gt;|Return iPXE| A\n    A --&gt;|Load elfshoe.ipxe| D[HTTP Server]\n    D --&gt;|Return menu| A\n    A --&gt;|Boot OS| E[OS Mirror]</code></pre>"},{"location":"setup/#step-1-get-ipxe-boot-files","title":"Step 1: Get iPXE Boot Files","text":"<p>Download pre-built iPXE binaries from the official iPXE project:</p> <p>Copy these commands</p> <pre><code>sudo mkdir -p /tftpboot\nsudo wget https://boot.ipxe.org/ipxe.pxe -O /tftpboot/ipxe.pxe\nsudo wget https://boot.ipxe.org/x86_64-efi/ipxe.efi -O /tftpboot/ipxe.efi\nsudo wget https://boot.ipxe.org/arm64-efi/ipxe.efi -O /tftpboot/ipxe-arm64.efi\nsudo chmod 644 /tftpboot/*\n</code></pre> <p>Other architectures</p> <p>Additional architectures are available at https://boot.ipxe.org/ including arm32-efi, i386-efi, riscv64-efi, and loong64-efi.</p>"},{"location":"setup/#step-2-install-and-configure-dnsmasq","title":"Step 2: Install and Configure dnsmasq","text":"<p>dnsmasq combines DHCP and TFTP in one lightweight daemon - perfect for simple setups.</p>"},{"location":"setup/#install-dnsmasq","title":"Install dnsmasq","text":"Debian/UbuntuRHEL/CentOS/Fedora <pre><code>sudo apt update\nsudo apt install dnsmasq\n</code></pre> <pre><code>sudo dnf install dnsmasq\n</code></pre>"},{"location":"setup/#configure-dnsmasq","title":"Configure dnsmasq","text":"<p>Create <code>/etc/dnsmasq.d/pxe-boot.conf</code>:</p> <pre><code># Enable TFTP server\nenable-tftp\ntftp-root=/tftpboot\n\n# Match all PXE clients\ndhcp-match=set:pxe,60,PXEClient\n\n# Set tag based on client architecture\ndhcp-match=set:bios,option:client-arch,0\ndhcp-match=set:efi-x86_64,option:client-arch,7\ndhcp-match=set:efi-x86_64,option:client-arch,9\ndhcp-match=set:efi-arm64,option:client-arch,11\n\n# Detect iPXE (for chain loading)\ndhcp-match=set:ipxe,175\n\n# First stage: Load iPXE bootloader\ndhcp-boot=tag:bios,tag:!ipxe,ipxe.pxe\ndhcp-boot=tag:efi-x86_64,tag:!ipxe,ipxe.efi\ndhcp-boot=tag:efi-arm64,tag:!ipxe,ipxe-arm64.efi\n\n# Second stage: Chain to elfshoe menu via HTTP\ndhcp-boot=tag:ipxe,chain.ipxe\n\n# Enable DHCP logging (optional)\nlog-dhcp\n</code></pre>"},{"location":"setup/#create-chain-loader","title":"Create Chain Loader","text":"<p>Create <code>/tftpboot/chain.ipxe</code> to load the menu from this site via HTTP:</p> <pre><code>#!ipxe\n\n# Chain to elfshoe menu via HTTP (faster than TFTP)\nchain https://timhughes.github.io/ipxe/elfshoe.ipxe || shell\n</code></pre> <p>Use your own domain</p> <p>Replace <code>https://timhughes.github.io/ipxe/</code> with your own domain if you're hosting the menu yourself.</p>"},{"location":"setup/#start-dnsmasq","title":"Start dnsmasq","text":"<pre><code>sudo systemctl restart dnsmasq\nsudo systemctl enable dnsmasq\n</code></pre>"},{"location":"setup/#step-3-configure-firewall","title":"Step 3: Configure Firewall","text":"<p>Open required ports:</p> UFW (Ubuntu/Debian)firewalld (RHEL/Fedora)iptables <pre><code>sudo ufw allow 67/udp   # DHCP\nsudo ufw allow 69/udp   # TFTP\n</code></pre> <pre><code>sudo firewall-cmd --permanent --add-service=dhcp\nsudo firewall-cmd --permanent --add-service=tftp\nsudo firewall-cmd --reload\n</code></pre> <pre><code>sudo iptables -A INPUT -p udp --dport 67 -j ACCEPT\nsudo iptables -A INPUT -p udp --dport 69 -j ACCEPT\n</code></pre>"},{"location":"setup/#step-4-test-your-setup","title":"Step 4: Test Your Setup","text":""},{"location":"setup/#test-tftp-server","title":"Test TFTP Server","text":"<p>From another machine on the same network:</p> <pre><code>tftp YOUR_SERVER_IP\ntftp&gt; get ipxe.efi\ntftp&gt; quit\n\n# Verify file was downloaded\nls -lh ipxe.efi\n</code></pre>"},{"location":"setup/#test-pxe-boot","title":"Test PXE Boot","text":"<ol> <li>Boot a VM or physical machine with network boot enabled in BIOS/UEFI</li> <li>Watch the boot process:</li> <li>Client gets IP from DHCP</li> <li>Downloads <code>ipxe.efi</code> via TFTP</li> <li>iPXE loads and fetches <code>elfshoe.ipxe</code> via HTTP</li> <li>The boot menu appears!</li> </ol>"},{"location":"setup/#debug-with-ipxe-shell","title":"Debug with iPXE Shell","text":"<p>If boot fails, press Ctrl+B during iPXE boot to enter the shell:</p> <pre><code># Check network configuration\ndhcp\nifstat\n\n# Test HTTP access\nchain https://timhughes.github.io/ipxe/elfshoe.ipxe\n\n# Or drop to shell for debugging\nshell\n</code></pre>"},{"location":"setup/#advanced-embedded-script-recommended-for-production","title":"Advanced: Embedded Script (Recommended for Production)","text":"<p>For production deployments, embed the chain command directly into the iPXE bootloader to eliminate the chain.ipxe file:</p> <pre><code># Create embed script\ncat &gt; embed.ipxe &lt;&lt; 'EOF'\n#!ipxe\nchain https://timhughes.github.io/ipxe/elfshoe.ipxe || shell\nEOF\n\n# Build iPXE with embedded script\ncd ipxe/src\nmake bin-x86_64-efi/ipxe.efi EMBED=../../embed.ipxe\n\n# Copy to TFTP directory\nsudo cp bin-x86_64-efi/ipxe.efi /tftpboot/\n</code></pre> <p>Then update dnsmasq to skip the chain loader:</p> <pre><code># Remove the chain.ipxe line, iPXE will auto-load the embedded script\ndhcp-boot=tag:bios,tag:!ipxe,ipxe.pxe\ndhcp-boot=tag:efi-x86_64,tag:!ipxe,ipxe.efi\n</code></pre>"},{"location":"setup/#alternative-dhcp-servers","title":"Alternative DHCP Servers","text":""},{"location":"setup/#isc-dhcp-server","title":"ISC DHCP Server","text":"<p>If you're already using ISC DHCP:</p> <pre><code># /etc/dhcp/dhcpd.conf\noption architecture-type code 93 = unsigned integer 16;\n\nsubnet 192.168.1.0 netmask 255.255.255.0 {\n    range 192.168.1.100 192.168.1.200;\n    option routers 192.168.1.1;\n    option domain-name-servers 8.8.8.8;\n\n    next-server 192.168.1.10;  # TFTP server IP\n\n    if option architecture-type = 00:00 {\n        filename \"ipxe.pxe\";  # BIOS\n    } elsif option architecture-type = 00:07 {\n        filename \"ipxe.efi\";  # UEFI x86_64\n    } elsif option architecture-type = 00:09 {\n        filename \"ipxe.efi\";  # UEFI x86_64 alternative\n    } elsif option architecture-type = 00:0b {\n        filename \"ipxe-arm64.efi\";  # UEFI ARM64\n    }\n}\n</code></pre>"},{"location":"setup/#standalone-tftp-tftpd-hpa","title":"Standalone TFTP (tftpd-hpa)","text":"<p>If you want a separate TFTP server:</p> <pre><code># Install\nsudo apt install tftpd-hpa  # Debian/Ubuntu\nsudo dnf install tftp-server  # RHEL/Fedora\n\n# Configure /etc/default/tftpd-hpa\nTFTP_USERNAME=\"tftp\"\nTFTP_DIRECTORY=\"/tftpboot\"\nTFTP_ADDRESS=\"0.0.0.0:69\"\nTFTP_OPTIONS=\"--secure\"\n\n# Start\nsudo systemctl restart tftpd-hpa\nsudo systemctl enable tftpd-hpa\n</code></pre>"},{"location":"setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"setup/#client-gets-ip-but-doesnt-boot","title":"Client gets IP but doesn't boot","text":"<ul> <li>Check DHCP next-server and filename options</li> <li>Verify TFTP server is running: <code>sudo systemctl status dnsmasq</code></li> <li>Check firewall allows UDP port 69</li> </ul>"},{"location":"setup/#connection-timed-out-when-loading-menu","title":"\"Connection timed out\" when loading menu","text":"<ul> <li>Verify HTTP access from client network: <code>curl https://timhughes.github.io/ipxe/elfshoe.ipxe</code></li> <li>Check client has internet access or mirror the menu locally</li> <li>Test with <code>chain http://</code> instead of <code>https://</code> to rule out SSL issues</li> </ul>"},{"location":"setup/#wrong-architecture-shown-in-menu","title":"Wrong architecture shown in menu","text":"<ul> <li>Verify iPXE is detecting architecture correctly (press Ctrl+B, then type <code>show buildarch</code>)</li> <li>Check your boot file matches client architecture (x86_64 needs x86_64-efi/ipxe.efi)</li> </ul>"},{"location":"setup/#references","title":"References","text":"<ul> <li>iPXE Project: https://ipxe.org/</li> <li>iPXE Downloads: https://boot.ipxe.org/</li> <li>elfshoe Documentation: https://timhughes.github.io/elfshoe/</li> <li>dnsmasq Documentation: http://www.thekelleys.org.uk/dnsmasq/doc.html</li> </ul>"}]}